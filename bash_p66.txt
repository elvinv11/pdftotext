El shell Bash

MacProgramadores

2. Las demás veces que se llama a ira() se guarda el directorio destino
en la pila.
3. Cuando se llama a volver() se saca un directorio de la pila, y se va
al directorio que esté en la cima de la pila.
El Listado 4.12 muestra nuestra versión inicial de estas funciones. Podemos
cargar el contenido de este fichero en el entorno con:
$ source piladir
Suponiendo que las funciones están guardadas en el fichero piladir.
# Funciones que implementan un movimiento en pila
# por los directorios
# Funcion que recibe en $1 el directorio al que cambiar,
# cambia y lo almacena en la pila PILADIR
function ira
{
PILADIR="$1 ${PILADIR:-$PWD}"
cd ${1:?"falta el directorio como argumento"}
echo $PILADIR
}
function volver
{
PILADIR=${PILADIR#* }
cd ${PILADIR%% *}
echo $PILADIR
}
Listado 4.12: Versión inicial de las funciones ira y volver

Vemos que el contenido de las funciones no es muy amplio. Vamos a
comentarlo un poco: La primera línea de la función ira() lo que hace es
guardar el directorio destino $1 al principio de la pila, además el operador :nos permite asignar el valor por defecto $PWD a PILADIR si ésta está vacía.
La segunda línea cambia al directorio $1, y en caso de que el argumento $1
no se haya suministrado el operador :? da un mensaje de error. Recuérdese
que comentamos que el operador :? siempre sale del script en los shells no
interactivos, pero en los shells interactivos (como desde donde nosotros lo
ejecutamos) no abandona el shell, simplemente abandona la función.
Respecto a la función volver(), su primera línea saca de la pila el directorio
de la cima, y la segunda línea coge en nuevo directorio de la cima como
directorio destino del comando cd.
Pág 66

