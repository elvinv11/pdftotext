El shell Bash

MacProgramadores

4. La sentencia case
Mientras que esta sentencia en lenguajes como C o Java se usa para
comprobar el valor de una variable simple, como un entero o un carácter, en
Bash esta sentencia permite realizar una comparación de patrones con la
cadena a examinar.
Su sintaxis es la siguiente:
case cadena in
patron1)
Sentencias ;;
patron2)
Sentencias ;;
·····
esac
Cada patrón puede estar formado por varios patrones separados por el
carácter |. Si cadena cumple alguno de los patrones, se ejecutan sus
correspondientes sentencias (las cuales se separan por ;) hasta ;;.
Ejercicio 5.4
Utilizando los comandos NetPBM que vimos en el Ejercicio 4.2 hacer un script
llamado tojpg que reciba uno o más nombres de ficheros con las
extensiones .tga, .pcx, .xpm, .tif o .gif, y genere ficheros con el
mismo nombre pero con la extensión .jpg.
Puede usar los comandos tgatoppm, xpmtoppm, pcxtoppm, tifftopnm y
giftopnm para generar un fichero .ppm intermedio, y luego usando
ppmtojpeg obtener el fichero .jpg final.
El Listado 5.5 muestra la solución propuesta. Obsérvese que como podemos
recibir un número variable de ficheros como argumento hemos hecho un
bucle for sobre el parámetro "$@".
# Script que convierte ficheros de imagen al formato .jpg
for fichero in "$@"
do
fichero_ppm=${fichero%.*}.ppm
case $fichero in
*.jpg) exit 0;;
*.tga) tgatoppm $fichero > $fichero_ppm;;
*.xpm) xpmtoppm $fichero > $fichero_ppm;;
*.pcx) pcxtoppm $fichero > $fichero_ppm;;
Pág 83

