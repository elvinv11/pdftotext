El shell Bash

MacProgramadores

*.tif) tifftopnm $fichero > $fichero_ppm;;
*.gif) figtoppm $fichero > $fichero_ppm;;
*.pnm|*.ppm) ;;
*) echo "Formato .${fichero##*.} no soportado"
exit 1;;

esac
fichero_salida=${fichero_ppm%.ppm}.jpg
pnmtojpeg $fichero_ppm > $fichero_salida
if ! [ $fichero = $fichero_ppm ]; then
rm $fichero_ppm
fidone

Listado 5.5: Script que convierte diversos formatos de imagen a .jpg

Ejercicio 5.5
Escribir una función que implemente el comando del Korn Shell cd old new,
donde cuando este comando recibe dos argumentos, coge el path del
directorio actual y busca el patrón old , si lo encuentra lo sustituye por new y
intenta cambiar a ese directorio. Cuando recibe cero o un argumentos actua
como normalmente.
Por ejemplo si en el directorio /Users/fernando escribimos:
$ cd fernando carolina
/Users/carolina
Cambia fernando por carolina en el path, y cambia a ese directorio.
El Listado 5.6 muestra la solución propuesta. Recuérdese que el número de
argumentos recibidos venía en $#, y cuando vale 2 es cuando aplicamos la
sustitución.
# Funcion que se comporta como en el Korn Shell
function cd
{
case $# in
0|1) builtin cd $@ ;;
2)
destino=${PWD//$1/$2}
if [ $destino = $PWD ]; then
echo " sustitucion a $destino no valida"
elif ! cd $destino ; then
echo "Directorio $destino no valido"
fi;;
*)
echo "Numero erroneo de argumentos";;
esac
}
Listado 5.6: Implementación del comando cd del Korn Shell
Pág 84

