El shell Bash

h,?
!cmd
q

MacProgramadores

Imprime un menú de ayuda
Pasa el comando cmd al shell
Salir (Quit)

Tabla 9.3: Comandos del depurador

Dentro de las funciones no necesitamos preceder las líneas por guión bajo ya
que podemos usar variables locales. El Listado 9.5 muestra la función que
recoge los comandos del prompt.
function _cmdprompt
{
local cmd args
while read -e -p "bashbd>" cmd args
do
case $cmd in
\?|h ) _menu;;
bc ) _ponbc $args;;
bp ) _ponbp $args;;
cb ) _borrabp $args;;
p ) _print;;
g ) return;;
q ) exit 0;;
s ) let _steps=${args:-1}
return;;
x ) _xtrace;;
!* ) eval ${cmd#!} $args;;
* )_msg "Comando incorrecto: '$cmd'";;
esac
done
}
function _menu
{
_msg 'Comandos
bp N
bp
bc cadena
bc
cb N
cb
p
g
s [N]
x
h,?
! cadena
q
return 1
}

de bashdb:
Pone un breakpoint en la linea N
Lista los breakpoints actuales
Pone un breakpoint con condicion cadena
Borra el breakpoint condicional
Borra el breakpoint en la linea N
Borra todos los breakpoints
Imprime el script depurado
Empieza/continua con la ejecucion
Ejecuta N sentencias (por defecto N=1)
Activa/desactiva la traza
Imprime este menu
Pasa cadena al shell
Salir'

Pág 162

