El shell Bash

MacProgramadores

2. Fake signals
Las fake signals (falsas señales) son un mecanismo muy potente de ayuda a
la depuración. Se trata de señales producidas por Bash, y no por un programa
o suceso externo al shell. Estas señales se resumen en la Tabla 9.2 y las
vamos a comentar a continuación.
Señal
SIGEXIT
SIGERR
SIGDEBUG
SIGRETURN

Descripción
El script acabó de ejecutarse
Un comando a retornado un código de terminación distinto de 0
El shell va a ejecutar una sentencia
Una función o script ejecutado con source ha acabado.

Tabla 9.2: Fake signals de Bash

En los siguientes subapartados vamos a comentar estas señales con más
detalle.

2.1. La señal SIGEXIT
Esta señal se activa justo antes de terminar de ejecutarse un proceso. La
señal se debe solicitar por el proceso (no por el proceso padre que lanza el
proceso), es decir, si desde el shell ejecutamos el script miscript así:
$ trap "echo 'Acabo el script'" EXIT
$ miscript
La señal no se produce, sino que el trap debe estar dentro del script, por
ejemplo, si hacemos el siguiente script:
trap "echo 'Acabo el script'" EXIT
echo "Empieza el script"
Al ejecutarlo obtenemos1:
$ miscript
Empieza el script
Acabo el script
La señal se lanza independientemente de como acabe el script: Por ejecutar
la última línea, o por encontrar un exit.

1

La señal sólo se produce cuando ejecutamos el script como un comando, no cuando lo
ejecutamos con source.
Pág 154

