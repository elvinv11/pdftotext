El shell Bash

MacProgramadores

Ejercicio 6.3
El comando du nos dice el tamaño ocupado por cada subdirectorio de un
directorio más o menos de la siguiente forma:
$ du
3
512
2
536

./X11-unix
./a503
./Items
.

En principio nos da el tamaño de disco en bloques que pueden se de 1024,
2048 o 4096 bytes (en concreto en Mac OS X son de 2048 bytes). Si
preferimos el tamaño ocupado en KBytes podemos usar la opción -k, y si
sólo queremos un resumen (la última línea del ejemplo anterior) podemos
usar la opción -s.
Hacer un script llamado ocupa que nos diga el tamaño ocupado por el
directorio que le pasemos como argumento en bytes, KB y MB.
# Nos dice cuanto ocupa cada subdirectorio
# de un directorio
# Comprueba argumento
if [ -z $1 ]; then
echo "Use: ocupa <directorio>"
exit 1
fi
# Obtiene los directorios y
lista=$(du -k)
IFS='
'
for fila in $lista
do
dir=$(echo $fila|cut -f
let kb=$(echo $fila|cut
let b=1024*kb
let mb=kb/1024
echo "$mb MB,
$kb
done

su tamano en una lista

2)
-f 1)
KB, $b B

$dir"

Listado 6.2: Script que muestra el espacio ocupado por cada subdirectorio de un directorio

El Listado 6.2 muestra la solución propuesta. Obsérvese que la variable IFS
está declarada de la forma:
IFS='
'
Pág 98

