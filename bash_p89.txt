El shell Bash

MacProgramadores

Podemos extender el ejemplo anterior a un comando hacer que recibe tres
posibles opciones: -a, -b y -c. La forma de implementarlo sería ahora:
while [ -n "$(echo $1 | grep '^-')" ]
do
case $1 in
-a) Procesa opción -a;;
-b) Procesa opción -b;;
-c) Procesa opción -c;;
* ) echo 'Use hacer [-a] [-b] [-c] args...'
exit 1;;
esac
shift
done
Procesa los argumentos
La condición del bucle busca la expresión regular '^-' que significa
"cualquier cosa que empieza por guión". Obsérvese que cada vez que
procesamos una opción ejecutamos shift para desplazar una vez los
argumentos.
Algunas opciones tienen sus propios argumentos, en cuyo caso el argumento
suele preceder a la opción. Por ejemplo, imaginemos que la opción -b recibe
a continuación un argumento. En este caso deberíamos de modificar el bucle
anterior para leer este argumento de la siguiente forma:
while [ -n "$(echo $1 | grep '^-')" ]
do
case $1 in
-a) Procesa opción -a;;
-b) Procesa opción -b
$2 es el argumento de la opción
shift;;
-c) Procesa opción -c;;
* ) echo 'Use hacer [-a] [-b arg] [-c] args...'
exit 1;;
esac
shift
done
Procesa los argumentos
Vemos que ahora también hacemos un shift en caso de encontrar la opción
-b, ya que el argumento de la opción es un argumento más.

Pág 89

