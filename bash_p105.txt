El shell Bash

MacProgramadores

$ declare -p PIPESTATUS
declare -a PIPESTATUS='([0]="0" [1]="0")'
Ejercicio 6.6
Implementar las funciones ira() , volver() y elegirdir() del Ejercicio
5.6 para que los directorios se almacenen en un array, y permitir así que los
nombres de directorios tengan espacios.
La solución definitiva a este ejercicio la mostramos y en el Listado 6.5. Esta
solución debería ahora de se fácil de seguir por el lector. Reacuérdese que
dentro de un bucle for aritmético (como el de elegirdir()) no era
necesario usar expresiones aritméticas en la inicialización, condición y
actualización, pero sí en el cuerpo.
# Funciones que implementan un movimiento en pila por los
directorios
# Funcion que recibe en $1 el directorio al que cambiar,
# cambia y lo almacena en la pila PILADIR
function ira
{
if [ -z "$1" ]; then
echo "Use ira <directorio>"
return 1
fi
if [ "$1" -ef "$PWD" ]; then
echo "Ya esta en el directorio $PWD"
return 2
fi
if [ \( -d "$1" \) -a \( -x "$1" \) ]; then
PILADIR[${#PILADIR[@]}]=$PWD
cd $1
echo ${PILADIR[@]}
else
echo "Directorio $1 no valido"
fi
}
function volver
{
if [ ${#PILADIR[@]} -gt 0 ]; then
cd ${PILADIR[$((${#PILADIR[@]}-1))]}
unset PILADIR[$((${#PILADIR[@]}-1))]
echo ${PILADIR[@]}
else
echo "La pila esta vacia, no se cambio de directorio"
fi
}

Pág 105

