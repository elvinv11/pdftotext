El shell Bash

Regla:
Cmd:
Regla:
Cmd:

MacProgramadores

programa.o : programa.c programa.h
gcc -c programa.c
programa : programa.o
gcc programa.o -o programa

function ejecutareglas
{
while true
do
# Carga la regla
if ! read target dospuntos sources ; then
return 0
fi
# Ignora lineas en blanco, comentarios y comandos
while [ "$target" = "" ] || \
! [ "${target#'#'}" = "$target" ] || \
! [ "$dospuntos" = ":" ]
do
if ! read target dospuntos sources; then
return 0
fi
done
echo -e "Regla:\t$target $dospuntos $sources"
# Comprueba si algun source es mas reciente
# que el target
for src in $sources
do
if [ $src -nt $target ]; then
read comando
echo -e "Cmd:\t${comando#\t}"
eval "${comando#\t}"
break
fi
done
done
}
ejecutareglas < $1
Listado 7.14: Script que implementa el comportamiento de make

PÃ¡g 128

