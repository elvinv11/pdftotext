El shell Bash

MacProgramadores

fichero_clientes=$1
fichero_clientes=${fichero_clientes:?'no suministrado'}
Ahora si olvidamos proporcionar el argumento vemos el mensaje:
./mejoresclientes: fichero_clientes: no suministrado
Para ver un ejemplo del operador de cadena := podríamos cambiar:
cuantos=$2
Por:
cuantos=${2:=5}
Pero esto no funciona porque estamos intentando asignar un valor a un
parámetros posicional (que son de sólo lectura). Lo que sí podemos hacer es:
cuantos=$2
·········
sort -nr $fichero_clientes | head -${cuantos:=$defecto}
El Listado 4.9 muestra el resultado de hacer nuestro script más tolerante a
errores:
# Script que saca los mejores clientes
# Tiene la forma
#
mejoresclientes <fichero> [<cuantos>]
fichero_clientes=$1
fichero_clientes=${fichero_clientes:?'no suministrado'}
cuantos=$2
defecto=5
sort -nr $fichero_clientes | head -${cuantos:=$defecto}
Listado 4.9: Script que lista los mejores clientes mejorado

3.2. Operadores de búsqueda de patrones
En la Tabla 4.2 se muestran los operadores de búsqueda de patrones
existentes y una descripción de su comportamiento.
Un uso frecuente de los operadores de búsqueda de patrones es eliminar
partes de la ruta de un fichero, como pueda ser el directorio o el nombre del
fichero. Vamos a exponer algunos ejemplos de cómo funcionan estos
operadores: Supongamos que tenemos la variable ruta cuyo valor es:
Pág 59

